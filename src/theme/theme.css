:root {
	--color-surface-1: #ffffff;
	--color-surface-2: #f8fafc;
	--color-surface-3: #f1f5f9;
	--color-border-subtle: #e2e8f0;
	--color-border-strong: #cbd5e1;
	--color-text-primary: #0f172a;
	--color-text-muted: #64748b;
	--color-text-subtle: #94a3b8;
	--color-text-on-accent: #ffffff;
	--color-text-on-strong: #ffffff;
	--color-accent: #3b82f6;
	--color-accent-soft: #eff6ff;
	--color-critical: #ef4444;
	--color-critical-soft: #fef2f2;
	--color-warning: #f59e0b;
	--color-warning-soft: #fffbeb;
	--color-positive: #10b981;
	--color-positive-soft: #ecfdf5;
	--color-overlay: rgba(0, 0, 0, 0.4);
	--layer-translucent-1: rgba(255, 255, 255, 0.5);
	--layer-translucent-2: rgba(255, 255, 255, 0.8);
	--shadow-surface: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
	--shadow-floating: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
	--shadow-accent: 0 4px 6px -1px rgba(59, 130, 246, 0.3);
	--focus-ring: rgba(59, 130, 246, 0.4);
	--radius: 16px;
	--button-bg: #ffffff;
	--button-bg-hover: #f8fafc;
	--button-border: #e2e8f0;
	--motion-duration-quick: 0.15s;
	--motion-duration-medium: 0.25s;
	--motion-ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
	--control-muted: #cbd5e1;

	/* Chart Colors */
	--chart-grid: rgba(15, 23, 42, 0.06);
	--chart-axis: rgba(15, 23, 42, 0.2);
	--data-series-1: #3b82f6;
	--data-series-2: #06b6d4;
	--data-series-3: #f97316;
	--data-series-4: #8b5cf6;
	--data-series-5: #ec4899;
	--data-series-6: #6366f1;
	--data-positive: #10b981;
	--data-negative: #ef4444;
	--data-neutral: #64748b;
}

[data-theme='dark'] {
	--color-surface-1: #0f172a;
	--color-surface-2: #1e293b;
	--color-surface-3: #334155;
	--color-border-subtle: #334155;
	--color-border-strong: #475569;
	--color-text-primary: #f1f5f9;
	--color-text-muted: #94a3b8;
	--color-text-subtle: #64748b;
	--color-text-on-accent: #ffffff;
	--color-text-on-strong: #ffffff;
	--color-accent: #60a5fa;
	--color-accent-soft: rgba(59, 130, 246, 0.15);
	--color-critical: #f87171;
	--color-critical-soft: rgba(239, 68, 68, 0.15);
	--color-warning: #fbbf24;
	--color-warning-soft: rgba(245, 158, 11, 0.15);
	--color-positive: #34d399;
	--color-positive-soft: rgba(16, 185, 129, 0.15);
	--color-overlay: rgba(0, 0, 0, 0.7);
	--layer-translucent-1: rgba(30, 41, 59, 0.5);
	--layer-translucent-2: rgba(30, 41, 59, 0.8);
	--shadow-surface: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
	--shadow-floating: 0 10px 15px -3px rgb(0 0 0 / 0.5), 0 4px 6px -4px rgb(0 0 0 / 0.5);
	--shadow-accent: 0 4px 6px -1px rgba(96, 165, 250, 0.3);
	--focus-ring: rgba(96, 165, 250, 0.4);
	--button-bg: #1e293b;
	--button-bg-hover: #334155;
	--button-border: #334155;
	--control-muted: #475569;

	--chart-grid: rgba(148, 163, 184, 0.1);
	--chart-axis: rgba(148, 163, 184, 0.3);
	--data-series-1: #60a5fa;
	--data-series-2: #22d3ee;
	--data-series-3: #fb923c;
	--data-series-4: #a78bfa;
	--data-series-5: #f472b6;
	--data-series-6: #818cf8;
	--data-positive: #34d399;
	--data-negative: #f87171;
	--data-neutral: #94a3b8;
}

* { box-sizing: border-box; }
body {
	margin: 0;
	font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
	background: var(--color-surface-1);
	color: var(--color-text-primary);
	transition: background-color var(--motion-duration-medium) var(--motion-ease-standard), color var(--motion-duration-medium) var(--motion-ease-standard);
	overflow: hidden; /* App Shell handles scroll */
}
a { color: inherit; text-decoration: none; }

/* Layout */
.app-shell { display: grid; grid-template-rows: auto 1fr; height: 100vh; }
.app-header {
	display: flex; align-items: center; gap: 16px; padding: 0 20px;
	background: var(--color-surface-2);
	border-bottom: 1px solid var(--color-border-subtle);
	backdrop-filter: blur(22px);
	flex-wrap: wrap;
	min-height: 56px;
}
.brand { font-weight: 700; letter-spacing: -0.02em; font-size: 18px; display: flex; align-items: center; gap: 8px; flex-shrink: 0; }
.brand .material-symbol { font-size: 20px; }
.nav { display: flex; gap: 12px; overflow-x: auto; -webkit-overflow-scrolling: touch; padding-bottom: 2px; flex: 1; min-width: 0; }
.nav::-webkit-scrollbar { display: none; }
.nav a {
	padding: 8px 14px;
	border-radius: 10px;
	color: var(--color-text-muted);
	transition:
		color var(--motion-duration-quick) var(--motion-ease-standard),
		background-color var(--motion-duration-quick) var(--motion-ease-standard),
		transform var(--motion-duration-quick) var(--motion-ease-standard);
	white-space: nowrap;
}
.nav a:hover { transform: translateY(-1px); }
.nav a.active { color: var(--color-text-primary); background: var(--color-accent-soft); font-weight: 600; }

.app-main {
	padding: 24px;
	overflow: auto;
	display: flex;
	justify-content: center;
}
.app-main__page {
	width: min(1280px, 100%);
	margin: 0 auto;
	display: flex;
	flex-direction: column;
	gap: 24px;
}
@media (max-width: 1280px) {
	.app-main { padding: 20px; }
	.app-main__page { gap: 20px; }
}
@media (max-width: 960px) {
	.app-main { padding: 16px; }
	.app-main__page { width: 100%; gap: 16px; }
}

/* Components */
.panel {
	background: var(--color-surface-2);
	border: 1px solid var(--color-border-subtle);
	border-radius: var(--radius);
	box-shadow: var(--shadow-surface);
	backdrop-filter: blur(24px);
	transition: background-color 0.25s ease, border-color 0.25s ease, box-shadow 0.25s ease;
}
.row { display: flex; gap: 16px; }
.col { display: flex; flex-direction: column; gap: 12px; }
.btn {
	padding: 8px 16px;
	background: var(--button-bg);
	border: 1px solid var(--button-border);
	color: var(--color-text-primary);
	border-radius: 12px;
	cursor: pointer;
	font-weight: 500;
	transition: all 0.15s ease;
}
.btn.primary { background: var(--color-accent); color: var(--color-text-on-accent); border-color: transparent; box-shadow: var(--shadow-accent); }
.btn:hover { transform: scale(1.02); opacity: 0.94; }
.btn-remove {
	width: 28px; height: 28px; padding: 0; border: 1px solid var(--color-border-subtle);
	background: var(--layer-translucent-1); color: var(--color-text-muted); border-radius: 50%;
	cursor: pointer; display: grid; placeItems: center;
}
.btn-remove:hover { background: var(--color-critical); color: var(--color-text-on-strong); border-color: transparent; }
.badge { display: inline-flex; align-items: center; gap: 6px; border: 1px solid var(--color-border-subtle); border-radius: 999px; padding: 2px 10px; font-size: 12px; color: var(--color-text-muted); background: var(--layer-translucent-1); }
.muted { color: var(--color-text-muted); }

/* Table */
.table { width: 100%; border-collapse: collapse; background: var(--color-surface-2); border-radius: var(--radius); overflow: hidden; }
.table th, .table td { border: 1px solid var(--color-border-subtle); padding: 12px 14px; }
.table thead th { background: var(--layer-translucent-2); text-align: left; font-weight: 600; color: var(--color-text-muted); }
.table tbody tr:nth-child(even) td { background: var(--layer-translucent-1); }

@media (max-width: 768px) {
	.table, .table thead, .table tbody, .table th, .table td, .table tr { display: block; }
	.table thead tr { position: absolute; top: -9999px; left: -9999px; }
	.table tr { border: 1px solid var(--color-border-subtle); border-radius: 12px; margin-bottom: 12px; background: var(--color-surface-2); padding: 12px; }
	.table td { border: none; position: relative; padding: 8px 0 8px 35%; min-height: 40px; display: flex; align-items: center; }
	.table td:first-child { padding: 8px 0; font-weight: 700; font-size: 16px; border-bottom: 1px solid var(--color-border-subtle); margin-bottom: 8px; width: 100%; justify-content: flex-start; }
	.table td:not(:first-child):before { position: absolute; top: 0; left: 0; width: 30%; padding-right: 10px; white-space: nowrap; font-weight: 600; color: var(--color-text-muted); content: attr(data-label); display: flex; align-items: center; height: 100%; }
}

/* Assignment Board */
.dnd-container { display: grid; grid-template-columns: minmax(240px, 320px) minmax(0, 1fr); gap: 16px; align-items: start; width: 100%; }
.assignment-board__sidebar {
	height: calc(100vh - 56px);
	position: sticky;
	top: 56px;
	display: flex;
	flex-direction: column;
	padding-right: 16px;
	overflow-y: auto;
	border-right: 1px solid #ffffff10;
	box-shadow: 2px 0 8px -4px rgba(0, 0, 0, 0.5);
}
.assignment-board__main { min-height: calc(100vh - 56px); display: flex; flex-direction: column; gap: 16px; min-width: 0; }
.assignment-board__hint { font-size: 13px; color: var(--color-text-muted); margin: 0 0 12px; display: flex; align-items: center; gap: 6px; }
.member-item { padding: 8px 12px; border: 1px solid transparent; border-radius: 999px; margin-bottom: 8px; background: var(--layer-translucent-1); transition: all 0.15s ease; }
.member-item:hover { background: var(--layer-translucent-2); transform: translateY(-1px); }
.member-item--selected { background: var(--color-accent); color: var(--color-text-on-accent); border-color: transparent; box-shadow: var(--shadow-accent); }
.member-item--selected:hover { background: var(--color-accent); transform: none; filter: brightness(1.05); }
.role-cell { width: 100%; min-height: 48px; padding: 4px 8px; background: var(--layer-translucent-1); border-radius: 12px; border: 1px dashed var(--color-border-subtle); transition: all 0.2s ease; display: flex; align-items: center; gap: 8px; justify-content: space-between; }
.role-cell.over { border-color: var(--color-accent); background: var(--color-accent-soft); transform: scale(1.01); }
.role-slot { flex: 1; min-width: 0; border: none; background: transparent; font: inherit; color: inherit; padding: 6px 10px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; text-align: center; }
.role-slot:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }
.role-slot .muted { width: 100%; display: block; font-size: 13px; }
.role-cell .btn-remove { flex-shrink: 0; }
.role-cell-group { display: flex; gap: 8px; flex-wrap: wrap; }
.role-cell-group .role-cell { flex: 1; min-width: 180px; }

/* Toolbar */
.toolbar { display: flex; gap: 8px; align-items: center; justify-content: space-between; margin-bottom: 16px; color: var(--color-text-muted); flex-wrap: wrap; }

.assignment-table-wrapper { width: 100%; overflow-x: auto; }
.assignment-table { table-layout: fixed; width: 100%; border-collapse: collapse; }
.assignment-table th, .assignment-table td { text-align: center; }
.assignment-table th:first-child, .assignment-table td:first-child { width: 64px; text-align: left; }

.dnd-container > .activity-feed { grid-column: 1 / -1; }

@media (max-width: 1100px) {
	.dnd-container { grid-template-columns: 1fr; }
	.assignment-board__sidebar {
		height: auto;
		position: static;
		overflow-y: visible;
		border-right: none;
		box-shadow: none;
		padding-right: 0;
		border-bottom: 1px solid var(--color-border-subtle);
		padding-bottom: 12px;
		margin-bottom: 8px;
	}
}

/* Mobile Responsive Styles for Assignment Board */
@media (max-width: 768px) {
	.dnd-container { grid-template-columns: 1fr; gap: 12px; }
	.assignment-board__sidebar {
		height: auto;
		position: static;
		overflow-y: visible;
		border-right: none;
		box-shadow: none;
		padding-right: 0;
		border-bottom: 1px solid var(--color-border-subtle);
		padding-bottom: 12px;
		margin-bottom: 4px;
	}
	.assignment-board__main { min-height: auto; }
	.member-list { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px; flex-wrap: nowrap; }
	.member-item { margin-bottom: 0; white-space: nowrap; flex-shrink: 0; }
	.hint-desktop { display: none; }
	.hint-mobile { display: inline !important; }
	.role-cell-group .role-cell { min-width: 130px; }
	.assignment-table-wrapper { overflow: visible; }
	.role-cell-group { display: block; }
}

/* Settings & Members Grid/Flex */
.settings-choice-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; }
.settings-choice-card {
	display: flex; align-items: flex-start; gap: 12px; padding: 16px; border-radius: 16px; border: 1px solid var(--color-border-subtle); background: var(--color-surface-1); cursor: pointer; transition: all 0.2s ease; position: relative;
}
.settings-choice-card:hover { border-color: var(--color-border-strong); transform: translateY(-2px); }
.settings-choice-card--active { border-color: var(--color-accent); background: var(--color-accent-soft); }
.settings-choice-card__icon { width: 40px; height: 40px; border-radius: 10px; background: var(--layer-translucent-2); display: flex; align-items: center; justify-content: center; font-size: 20px; color: var(--color-text-primary); }
.settings-choice-card__input { position: absolute; opacity: 0; pointer-events: none; }
.settings-choice-card__text { display: flex; flex-direction: column; gap: 4px; }
.settings-choice-card__title { font-weight: 600; color: var(--color-text-primary); }
.settings-choice-card__description { font-size: 13px; color: var(--color-text-muted); line-height: 1.4; }

.members-layout { display: flex; gap: 24px; align-items: flex-start; }
@media (max-width: 900px) {
	.members-layout { flex-direction: column; gap: 16px; }
	.members-layout > .col { width: 100%; }
}

/* Modal & Toast */
.modal-panel {
	width: 680px;
	max-width: 95vw;
	max-height: 90vh;
	display: flex;
	flex-direction: column;
	padding: 24px;
	border-radius: 20px;
	box-shadow: var(--shadow-floating);
}
@media (max-width: 480px) {
	.modal-panel {
		padding: 16px;
		width: 100%;
		height: 100%;
		max-height: 100%;
		border-radius: 0;
	}
}

.toast-center { position: fixed; top: 16px; right: 16px; display: flex; flex-direction: column; gap: 10px; z-index: 999; max-width: 320px; width: calc(100% - 32px); }
.toast {
	display: flex; align-items: flex-start; gap: 10px; padding: 12px 14px;
	background: var(--color-surface-2); border: 1px solid var(--color-border-subtle);
	border-radius: 14px; box-shadow: var(--shadow-floating);
}
.toast__icon { font-size: 18px; line-height: 1; display: flex; align-items: center; justify-content: center; }
.toast__icon .material-symbol { font-size: 20px; }
.toast__close { background: none; border: none; color: var(--color-text-muted); cursor: pointer; padding: 0; }

/* Utilities */
.material-symbol {
	font-family: 'Material Symbols Outlined';
	font-weight: normal;
	font-style: normal;
	font-size: 1em;
	line-height: 1;
	letter-spacing: normal;
	text-transform: none;
	display: inline-block;
	white-space: nowrap;
	word-wrap: normal;
	direction: ltr;
	-webkit-font-feature-settings: 'liga';
	-webkit-font-smoothing: antialiased;
	font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
	color: inherit;
	vertical-align: middle;
}
.theme-toggle { display: inline-flex; align-items: center; justify-content: center; padding-inline: 10px; color: var(--color-text-primary); margin-left: auto; }
.theme-toggle__text { display: none; }

