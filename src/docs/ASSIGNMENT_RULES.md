# 배정 규칙 및 경고 로직 (Assignment Rules & Warning Logic)

## 1. 연속 배정 경고 (Continuous Assignment)
특정 인원이 동일한 역할에 연속적으로 배정되는 것을 방지하기 위한 시스템입니다.
최근 **3주간**의 배정 이력을 확인하여 경고를 발생시킵니다.

### 감지 조건
- **대상**: SW, 자막, 고정, 스케치, 사이드
- **로직**:
    1. 현재 주차 배정안과 과거 3주간의 배정 이력을 비교합니다.
    2. `이름`이 같고 `부서(1부/2부)`와 `역할`이 모두 일치하는 경우를 찾습니다.
    3. 연속성이 감지되면 경고를 생성합니다.

### 경고 레벨 (Priority)
연속 배정된 시점에 따라 중요도가 달라집니다.

| 경고 레벨 | 표시 | 조건 | 비고 |
| :--- | :--- | :--- | :--- |
| **Error** | 긴급 | **1주 전**에 동일 역할 수행 | 2주 연속 배정으로 간주 (즉시 수정 필요) |
| **Warn** | 주의 | **2주 전**에 동일 역할 수행 | 최근 3주 내 2회 배정 (주의 필요) |
| **Info** | 알림 | **3주 전**에 동일 역할 수행 | 단순 참고용 (위젯 미표시) |

---

## 2. 로테이션 추천 (Rotation Suggestion)
특정 역할 경험이 오래된 멤버에게 새로운 배정을 유도하기 위한 시스템입니다.
최근 **12주간**의 배정 이력을 분석하여 추천합니다.

### 추천 대상 선정 로직
1. **활성 멤버** 전체를 대상으로 합니다.
2. 아래 조건을 만족하는 경우 추천 목록에서 **제외**합니다:
    - 이번 주에 이미 해당 역할(또는 다른 역할)에 배정된 경우.
    - **1주 전**에 해당 역할을 수행한 경우 (최소 1주 휴식 보장).
3. 역할별 특수 조건:
    - **SW**: 과거 SW 수행 이력이 있는 멤버에게만 추천.
    - **자막**: SW 수행 가능한 고기수 멤버는 자막 추천에서 제외 (SW 우선 배정 유도).

### 우선순위 정렬
- 해당 역할을 수행한 지 **가장 오래된** 멤버가 최상단에 노출됩니다.
- 오랫동안 배정되지 않은 멤버를 시각적으로 강조하여 고른 기회를 제공합니다.

### 경고 레벨
- **Info**: 로테이션 추천은 강제성이 없는 `Info` 레벨로 생성됩니다.
- 참고: 기존 `WarningWidget`에서는 `Info` 레벨을 필터링하여 사용자에게 노출하지 않았습니다.
