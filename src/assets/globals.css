@import "tailwindcss";
@import "tw-animate-css";

/* 
  Typography Scale Override (시원한 가독성)
  @layer 외부 정의 -> @layer theme보다 우선순위 높음
*/
:root {
    --text-xs: 0.9375rem;    /* 15px */
    --text-sm: 1rem;         /* 16px */
    --text-base: 1.125rem;   /* 18px */
    --text-lg: 1.25rem;      /* 20px */
    --text-xl: 1.5rem;       /* 24px */
    --text-2xl: 2rem;        /* 32px */
    --text-3xl: 2.25rem;     /* 36px */     --radius: 0.625rem;     --background: oklch(1 0 0);     --foreground: oklch(0.145 0 0);     --card: oklch(1 0 0);     --card-foreground: oklch(0.145 0 0);     --popover: oklch(1 0 0);     --popover-foreground: oklch(0.145 0 0);     --primary: oklch(0.205 0 0);     --primary-foreground: oklch(0.985 0 0);     --secondary: oklch(0.97 0 0);     --secondary-foreground: oklch(0.205 0 0);     --muted: oklch(0.97 0 0);     --muted-foreground: oklch(0.556 0 0);     --accent: oklch(0.97 0 0);     --accent-foreground: oklch(0.205 0 0);     --destructive: oklch(0.577 0.245 27.325);     --border: oklch(0.922 0 0);     --input: oklch(0.922 0 0);     --ring: oklch(0.708 0 0);     --chart-1: oklch(0.646 0.222 41.116);     --chart-2: oklch(0.6 0.118 184.704);     --chart-3: oklch(0.398 0.07 227.392);     --chart-4: oklch(0.828 0.189 84.429);     --chart-5: oklch(0.769 0.188 70.08);     --sidebar: oklch(0.985 0 0);     --sidebar-foreground: oklch(0.145 0 0);     --sidebar-primary: oklch(0.205 0 0);     --sidebar-primary-foreground: oklch(0.985 0 0);     --sidebar-accent: oklch(0.97 0 0);     --sidebar-accent-foreground: oklch(0.205 0 0);     --sidebar-border: oklch(0.922 0 0);     --sidebar-ring: oklch(0.708 0 0);
}

/* 
  Theme Configuration 
  - Apple + Linear Inspired
  - Semantic Tokens
*/
@theme {
    /* ══════════════════════════════════════════════════════════════
       TYPOGRAPHY SCALE (Accessibility + Responsive)
       - rem 단위 사용: 브라우저 설정 존중
       - 모바일: 16px 기준 (편안한 읽기)
       - 데스크톱: 14px 기준 (정보 밀도)
       ══════════════════════════════════════════════════════════════ */
    --font-sans: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Noto Sans KR', 'Malgun Gothic', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', monospace;

    /* rem 기반 타이포그래피 (시원한 가독성 스케일) */
    /* Tailwind v4: --font-size-* 형식으로 text-* 유틸리티 오버라이드 */
    --font-size-xs: 0.9375rem;    /* 15px - Labels, timestamps */
    --font-size-sm: 1rem;         /* 16px - Secondary text */
    --font-size-base: 1.125rem;   /* 18px - Body */
    --font-size-lg: 1.25rem;      /* 20px - Subheadings */
    --font-size-xl: 1.5rem;       /* 24px - Section titles */
    --font-size-2xl: 2rem;        /* 32px - Page titles */
    --font-size-3xl: 2.25rem;     /* 36px */
    --font-size-4xl: 2.5rem;      /* 40px */

    /* 터치 영역 (Apple HIG: 최소 44pt) */
    --touch-target-min: 2.75rem;
    /* 44px */
    --input-height-mobile: 2.75rem;
    /* 44px */
    --input-height-desktop: 2.25rem;
    /* 36px */
    /* 버튼/인풋 높이 (Apple HIG 기반) */
    --button-height-mobile: 2.75rem;
    /* 44px */
    --button-height-desktop: 2.25rem;
    /* 36px */

    /* 컴포넌트 크기 토큰 (하드코딩 대체) */
    --pill-height: 2rem;           /* 32px - 멤버 pill 최소 높이 */
    --cell-height: 2.25rem;        /* 36px - 테이블 셀 높이 */
    --badge-size-sm: 1.125rem;     /* 18px - 작은 배지 */
    --input-min-height: 5rem;      /* 80px - textarea 최소 높이 */
    --truncate-max-width: 12.5rem; /* 200px - 텍스트 truncate 최대 너비 */

    /* Radius - Smooth & Modern (DESIGN_SYSTEM.md) */
    --radius-sm: 0.375rem;
    /* 6px */
    --radius-md: 0.625rem;
    /* 10px */
    --radius-lg: 0.875rem;
    /* 14px */
    --radius-xl: 1.25rem;
    /* 20px */

    /* Colors (Mapping to Semantic Vars) */
    --color-canvas: var(--color-canvas);
    --color-surface: var(--color-surface);
    --color-surface-elevated: var(--color-surface-elevated);

    --color-label-primary: var(--color-label-primary);
    --color-label-secondary: var(--color-label-secondary);
    --color-label-tertiary: var(--color-label-tertiary);

    --color-border-subtle: var(--color-border-subtle);
    --color-border-default: var(--color-border-default);

    --color-accent: var(--color-accent);
    --color-accent-soft: var(--color-accent-soft);

    --color-success: var(--color-success);
    --color-warning: var(--color-warning);
    --color-danger: var(--color-danger);

    /* Animation */
    --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* 
  Semantic Variables Definition
  - Light: Clean, Crisp, White/Slate
  - Dark: Deep, Vibrant, Black/Zinc
*/
:root {
    /* Light Mode */
    --color-canvas: #ffffff;
    /* Pure white or VERY light gray */
    --color-surface: #f9fafb;
    /* Slight contrast for panels */
    --color-surface-elevated: #ffffff;

    --color-label-primary: #111827;
    --color-label-secondary: #6b7280;
    --color-label-tertiary: #9ca3af;

    --color-border-subtle: #f3f4f6;
    --color-border-default: #e5e7eb;

    --color-accent: #2563eb;
    /* Blue 600 */
    --color-accent-soft: #eff6ff;
    /* Blue 50 */

    --color-success: #10b981;
    --color-warning: #f59e0b;
    --color-danger: #ef4444;
}

/* Dark Mode Override - Using .dark class for Tailwind/shadcn compatibility */
.dark {
    --color-canvas: #09090b;
    /* Zinc 950 - Modern Dark */
    --color-surface: #121214;
    --color-surface-elevated: #1c1c1f;

    --color-label-primary: #d4d4d8;
    /* Zinc-300 - 눈부심 방지 */
    --color-label-secondary: #a1a1aa;
    --color-label-tertiary: #52525b;

    --color-border-subtle: #27272a;
    --color-border-default: #3f3f46;

    --color-accent: #3b82f6;
    /* Blue 500 */
    --color-accent-soft: #172554;
    /* Blue 950 */
}

/* Base Reset & Utilities */
@layer base {
    * {
        @apply border-border-default;
    }

    /* Global Scrollbar Styling (Apply to ALL elements) */
    * {
        scrollbar-width: thin;
        scrollbar-color: var(--color-border-default) transparent;
    }

    *::-webkit-scrollbar {
        width: 5px;
        height: 5px;
    }

    *::-webkit-scrollbar-track {
        background: transparent;
    }

    *::-webkit-scrollbar-thumb {
        background: var(--color-border-default);
        border-radius: 10px;
    }

    *::-webkit-scrollbar-thumb:hover {
        background: var(--color-label-tertiary);
    }

    body {
        @apply bg-canvas text-label-primary font-sans antialiased;
        line-height: 1.625; /* leading-relaxed */
        letter-spacing: -0.01em;
    }

    /* 
       Typography Scale: @theme 블록의 --font-size-* 변수가 
       Tailwind v4에서 text-* 유틸리티에 자동 적용됨.
       !important 오버라이드 제거됨 (유지보수성 향상)
    */
}

@layer utilities {
    .flex-center {
        @apply flex items-center justify-center;
    }

    /* Glassmorphism Utility */
    .glass {
        @apply bg-canvas/80 backdrop-blur-md border border-border-subtle;
    }

    /* Spring Animation Utility */
    .transition-spring {
        transition-timing-function: var(--ease-spring);
    }

    /* Skeleton Shimmer Effect */
    .skeleton-shimmer {
        position: relative;
        overflow: hidden;
    }

    .skeleton-shimmer::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        transform: translateX(-100%);
        background: linear-gradient(90deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent);
        animation: shimmer 2s infinite;
    }

    /* Hide scrollbar but allow scroll */
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Score-based color utilities for dynamic scoring UI */
    .score-excellent {
        color: var(--color-success);
    }
    .score-good {
        color: var(--color-label-secondary);
    }
    .score-fair {
        color: var(--color-warning);
    }
    .score-poor {
        color: var(--color-danger);
    }

    /* Scroll mask for fadeout effect at edges */
    .scroll-mask-y {
        mask-image: linear-gradient(to bottom, transparent, black 15px, black calc(100% - 15px), transparent);
        -webkit-mask-image: linear-gradient(to bottom, transparent, black 15px, black calc(100% - 15px), transparent);
    }

    /* Legend dot utilities (background-color replacement) */
    .dot-success { background-color: var(--color-success); }
    .dot-secondary { background-color: var(--color-label-secondary); }
    .dot-warning { background-color: var(--color-warning); }
    .dot-danger { background-color: var(--color-danger); }

    /* ══════════════════════════════════════════════════════════════
       UX ESSENTIALS - Reusable Interactive Utilities
       유지보수성을 위해 중복 스타일을 단일 유틸리티로 통합
       ══════════════════════════════════════════════════════════════ */

    /* 
     * 기본 인터랙티브 요소 (공통)
     * 사용: 모든 클릭 가능한 요소에 적용
     */
    .interactive-base {
        cursor: pointer;
        transition: all 0.15s ease;
    }
    .interactive-base:focus-visible {
        outline: 2px solid var(--color-accent);
        outline-offset: 2px;
    }

    /* 
     * 버튼형 인터랙티브 (작은 요소)
     * 사용: 필터 칩, 토글 버튼, 아이콘 버튼
     */
    .btn-interactive {
        cursor: pointer;
        transition: all 0.15s ease;
    }
    .btn-interactive:hover {
        background-color: var(--color-surface-elevated);
    }
    .btn-interactive:active {
        transform: scale(0.95);
    }
    .btn-interactive:focus-visible {
        outline: 2px solid var(--color-accent);
        outline-offset: 2px;
    }

    /*
     * 카드형 인터랙티브 (큰 선택 영역)
     * 사용: 설정 옵션 카드, 확장 가능한 패널
     */
    .card-interactive {
        cursor: pointer;
        transition: all 0.2s ease;
    }
    .card-interactive:hover {
        border-color: var(--color-border-default);
        background-color: var(--color-surface-elevated);
    }
    .card-interactive:active {
        transform: scale(0.99);
    }
    .card-interactive:focus-visible {
        outline: 2px solid var(--color-accent);
        outline-offset: 2px;
    }

    /*
     * 드래그 가능한 요소
     * 사용: 멤버 pill, 배정 슬롯
     */
    .draggable-item {
        cursor: grab;
        transition: all 0.15s ease;
    }
    .draggable-item:hover {
        background-color: var(--color-surface-elevated);
        border-color: var(--color-border-default);
    }
    .draggable-item:active {
        cursor: grabbing;
        transform: scale(0.95);
    }
    .draggable-item:focus-visible {
        outline: 2px solid var(--color-accent);
        outline-offset: 1px;
    }

    /*
     * 아이콘 버튼 (정사각형)
     * 사용: 닫기, 편집, 삭제 아이콘 버튼
     */
    .icon-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        padding: 0.375rem;
        border-radius: var(--radius-sm);
        color: var(--color-label-secondary);
        transition: all 0.15s ease;
    }
    .icon-btn:hover {
        color: var(--color-label-primary);
        background-color: var(--color-surface-elevated);
    }
    .icon-btn:active {
        transform: scale(0.9);
    }
    .icon-btn:focus-visible {
        outline: 2px solid var(--color-accent);
        outline-offset: 2px;
    }

    /* 터치 타겟 최소 크기 보장 (Apple HIG: 44px) */
    .touch-target {
        min-width: 44px;
        min-height: 44px;
    }

    /* 텍스트 호버 강조 */
    .hover-text:hover {
        color: var(--color-label-primary);
    }

    /* 배경 호버 */
    .hover-bg:hover {
        background-color: var(--color-surface-elevated);
    }

    /* Score color utilities */
    .score-excellent { color: var(--color-success); }
    .score-good { color: var(--color-label-secondary); }
    .score-fair { color: var(--color-warning); }
    .score-poor { color: var(--color-danger); }

    /* Scroll mask for fadeout effect at edges */
    .scroll-mask-y {
        mask-image: linear-gradient(to bottom, transparent, black 15px, black calc(100% - 15px), transparent);
        -webkit-mask-image: linear-gradient(to bottom, transparent, black 15px, black calc(100% - 15px), transparent);
    }

    /* Legend dot utilities */
    .dot-success { background-color: var(--color-success); }
    .dot-secondary { background-color: var(--color-label-secondary); }
    .dot-warning { background-color: var(--color-warning); }
    .dot-danger { background-color: var(--color-danger); }
}

/* Keyframe Animations */
@keyframes shimmer {
    100% {
        transform: translateX(100%);
    }
}

/* Smooth page transitions */
@media (prefers-reduced-motion: no-preference) {
    html {
        scroll-behavior: smooth;
    }
}

/* Reduced motion support
   data-motion="reduce" 일 때만 애니메이션 비활성화
   앱 설정(motionPreference)이 OS 설정보다 우선 */
:root[data-motion="reduce"] *,
:root[data-motion="reduce"] *::before,
:root[data-motion="reduce"] *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
}

/* ══════════════════════════════════════════════════════════════
   ANIMATION UTILITIES (Tailwind v4에서 기본 제공되지 않음)
   ══════════════════════════════════════════════════════════════ */

/* Pulse Animation */
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

.animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Spin Animation */
@keyframes spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

.animate-spin {
    animation: spin 1s linear infinite;
}

/* Bounce Animation */
@keyframes bounce {
    0%, 100% {
        transform: translateY(-25%);
        animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
    }
    50% {
        transform: translateY(0);
        animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
    }
}

.animate-bounce {
    animation: bounce 1s infinite;
}

/* Ping Animation (notification dot) */
@keyframes ping {
    75%, 100% {
        transform: scale(2);
        opacity: 0;
    }
}

.animate-ping {
    animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;
}

/* ══════════════════════════════════════════════════════════════
   PAGE TRANSITION ANIMATIONS
   ══════════════════════════════════════════════════════════════ */

/* Page Fade */
.page-enter-active,
.page-leave-active {
    transition: opacity 0.2s ease, transform 0.2s ease;
}

.page-enter-from {
    opacity: 0;
    transform: translateY(8px);
}

.page-leave-to {
    opacity: 0;
    transform: translateY(-8px);
}

/* Fade Only (for modals, overlays) */
.fade-enter-active,
.fade-leave-active {
    transition: opacity 0.15s ease;
}

.fade-enter-from,
.fade-leave-to {
    opacity: 0;
}

/* Scale Fade (for dropdowns, popups) */
.scale-enter-active,
.scale-leave-active {
    transition: opacity 0.15s ease, transform 0.15s ease;
}

.scale-enter-from,
.scale-leave-to {
    opacity: 0;
    transform: scale(0.95);
}

/* Slide Up (for bottom sheets, modals) */
.slide-up-enter-active,
.slide-up-leave-active {
    transition: opacity 0.2s ease, transform 0.2s ease;
}

.slide-up-enter-from,
.slide-up-leave-to {
    opacity: 0;
    transform: translateY(16px);
}

/* 
  ---break---
*/

@theme inline {
    --radius-sm: calc(var(--radius) - 4px);
    --radius-md: calc(var(--radius) - 2px);
    --radius-lg: var(--radius);
    --radius-xl: calc(var(--radius) + 4px);
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --color-card: var(--card);
    --color-card-foreground: var(--card-foreground);
    --color-popover: var(--popover);
    --color-popover-foreground: var(--popover-foreground);
    --color-primary: var(--primary);
    --color-primary-foreground: var(--primary-foreground);
    --color-secondary: var(--secondary);
    --color-secondary-foreground: var(--secondary-foreground);
    --color-muted: var(--muted);
    --color-muted-foreground: var(--muted-foreground);
    --color-accent: var(--accent);
    --color-accent-foreground: var(--accent-foreground);
    --color-destructive: var(--destructive);
    --color-border: var(--border);
    --color-input: var(--input);
    --color-ring: var(--ring);
    --color-chart-1: var(--chart-1);
    --color-chart-2: var(--chart-2);
    --color-chart-3: var(--chart-3);
    --color-chart-4: var(--chart-4);
    --color-chart-5: var(--chart-5);
    --color-sidebar: var(--sidebar);
    --color-sidebar-foreground: var(--sidebar-foreground);
    --color-sidebar-primary: var(--sidebar-primary);
    --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
    --color-sidebar-accent: var(--sidebar-accent);
    --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
    --color-sidebar-border: var(--sidebar-border);
    --color-sidebar-ring: var(--sidebar-ring);
}

/* 
  ---break---
*/

.dark {
    --background: oklch(0.145 0 0);
    --foreground: oklch(0.985 0 0);
    --card: oklch(0.205 0 0);
    --card-foreground: oklch(0.985 0 0);
    --popover: oklch(0.205 0 0);
    --popover-foreground: oklch(0.985 0 0);
    --primary: oklch(0.922 0 0);
    --primary-foreground: oklch(0.205 0 0);
    --secondary: oklch(0.269 0 0);
    --secondary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.269 0 0);
    --muted-foreground: oklch(0.708 0 0);
    --accent: oklch(0.269 0 0);
    --accent-foreground: oklch(0.985 0 0);
    --destructive: oklch(0.704 0.191 22.216);
    --border: oklch(1 0 0 / 10%);
    --input: oklch(1 0 0 / 15%);
    --ring: oklch(0.556 0 0);
    --chart-1: oklch(0.488 0.243 264.376);
    --chart-2: oklch(0.696 0.17 162.48);
    --chart-3: oklch(0.769 0.188 70.08);
    --chart-4: oklch(0.627 0.265 303.9);
    --chart-5: oklch(0.645 0.246 16.439);
    --sidebar: oklch(0.205 0 0);
    --sidebar-foreground: oklch(0.985 0 0);
    --sidebar-primary: oklch(0.488 0.243 264.376);
    --sidebar-primary-foreground: oklch(0.985 0 0);
    --sidebar-accent: oklch(0.269 0 0);
    --sidebar-accent-foreground: oklch(0.985 0 0);
    --sidebar-border: oklch(1 0 0 / 10%);
    --sidebar-ring: oklch(0.556 0 0);
}

/* 
  ---break---
*/

@layer base {
  * {
    @apply border-border outline-ring/50;
    }
  body {
    @apply bg-background text-foreground;
    }
}